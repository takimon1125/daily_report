## 取り組んだ課題一覧
- SQL 
    - 達人に学ぶDB設計 第４章まで
    - スッキリわかるSQL入門　SQLドリル途中     まで

## わかったこと
### データベース設計の基本概念

**データベース設計**は、システムの品質を最も大きく左右する重要な要素である。データベース設計には以下の3つのレベルが存在する：

1. **論理設計** - 正規化やER図を使ったデータモデル設計
2. **物理設計** - サーバーやストレージの物理的ハードウェアレベル設計  
3. **実装設計** - 特定のデータベース製品を前提とした具体的構築手順

### データ中心アプローチ（DOA）の重要性

現代のシステム開発では**データ中心アプローチ**が主流となっている。これは「最初にデータありき」という考え方で、プログラムよりも前にデータの設計から始める方法論である。

**DOAの利点：**
- データは永続的で変化しにくいため、複数のプログラムで共用しやすい
- 業務要件の仕様変更にも柔軟に対応できる
- プロセス中心アプローチ（POA）の欠点を克服

### 3層スキーマモデル

データベース設計では**3層スキーマモデル**を採用する：

1. **外部スキーマ（外部モデル）** - ビューの世界、ユーザーから見たデータベース
2. **概念スキーマ（論理データモデル）** - テーブルの世界、開発者から見たデータベース
3. **内部スキーマ（物理データモデル）** - ファイルの世界、DBMSから見たデータベース

**データ独立性**を保証するため、概念スキーマは外部スキーマと内部スキーマの間の緩衝材として機能する。

### 論理設計のステップ

論理設計は以下の順序で行う：

1. **エンティティの抽出** - システムに必要なデータの集合体を特定
2. **エンティティの定義** - 各エンティティが保持する属性とキーを定義
3. **正規化** - データの冗長性を排除し、一貫性と効率性を保持
4. **ER図の作成** - エンティティ間の関係を視覚的に表現

### 物理設計の要素

物理設計には以下の5つのタスクが含まれる：

1. **テーブル定義** - 論理設計の概念スキーマを物理モデルに変換
2. **インデックス設計** - パフォーマンス向上のための索引設計
3. **ハードウェアのサイジング** - キャパシティとパフォーマンスの見積もり
4. **ストレージの冗長構成** - RAIDレベルの選択
5. **データベースファイルの物理配置** - ファイルの配置戦略

### RAIDとストレージ設計

**RAIDの選択基準：**
- **RAID10** - 信頼性と性能の両立（コスト高）
- **RAID5** - 信頼性と性能のバランス（最低3本必要）
- **RAID1** - 高信頼性（性能向上なし）
- **RAID0** - データベースでは絶対に採用してはならない

**勘どころ：** データベースのRAIDは少なくともRAID5で構成する。お金に余裕があればRAID10かRAID6。RAID0は論外。

### レプリケーションと可用性設計

**レプリケーション**は、現用系と待機系からなる複数のデータベースを用意し、データの同期を取る技術である。

**レプリケーションの種類：**
- **同期レプリケーション** - すべての待機系の書き込み完了を待つ（信頼性重視）
- **非同期レプリケーション** - 待機系の書き込みを待たずに完了通知（性能重視）

**リードレプリカ**による負荷分散も重要な技術で、読み込みスループットの向上が期待できる。

### バックアップとリカバリ設計

**バックアップの主要方式：**

1. **フルバックアップ** - すべてのデータをバックアップ（基本）
2. **差分バックアップ** - 前回フルバックアップからの変更分をバックアップ
3. **増分バックアップ** - 前回バックアップからの変更分のみをバックアップ

**バックアップ設計の考慮点：**
- 復旧時点の要件（RPO）
- バックアップウィンドウ
- リカバリウィンドウ（RTO）
- 保管世代数

**勘どころ：** バックアップ方式は「フルバックアップ＋差分バックアップ」または「フルバックアップ＋増分バックアップ」が一般的。

### クラウド環境での設計

**クラウドのメリット：**
- 初期費用が低い（スモールスタートに適している）
- リソース増強が簡単（バースト負荷に対応可能）
- 運用保守要員が不要
- データ分散による耐障害対策が容易

**クラウドのデメリット：**
- ソフトウェアのカスタマイズがきかない
- 他のシステムとの連携が難しい
- コストが増える可能性がある
- セキュリティ対策に柔軟性がない

**AWSでの可用性設計：**
- **マルチAZ構成** - 複数のAZ間でActive-Standby方式のレプリケーション
- **マルチリージョン構成** - 災害対策のためのリージョンをまたいだ構成

### テーブル設計の基本原則

**テーブルの定義：**
- テーブルとは、共通点を持ったレコードの集合である
- テーブル名は英語ならば複数形／集合名詞で書ける

**キーの重要性：**
- **主キー** - テーブルにおいて必ず一つ存在し、一意に識別する
- **外部キー** - テーブル間の関係を表現し、参照整合性制約を課す

**制約の活用：**
- **NOT NULL制約** - 可能な限り付加する
- **一意制約** - 複数設定可能
- **CHECK制約** - 値の範囲を制限
                               

                                                                                                                    
## 次やること
- SQL
    - スッキリわかるSQL入門   SQLドリル
    - 達人に学ぶDB設計                         
    
## 感じたこと
- SQLドリルの量が多くて結構大変なので、DB設計書と並行して、進めている。                                                                                                                                                                                                                                                                                                                                                            
                                                                                             
                                    
## 学習時間
- 本日1h
- 合計：275.5h